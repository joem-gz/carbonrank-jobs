# Task: Epic 3 CP3.2 + CP3.3
Owner agent/tool: Codex CLI
Branch: feature/epic3-employer-impact-signals

## Scope
Will change:
- Add ONS intensity import script + generated map JSON.
- Wire sector intensity band/value into `/api/employer/signals`.
- Add employer signals UI panel + override storage.
- Add tooltip status for employer signals on job cards.
- Add tests for mapping, UI states, and overrides.

Wonâ€™t change:
- SBTi ingestion/badges (CP3.4).
- Adzuna search behavior.

## Files likely touched
- `server/ons_intensity.ts` (new)
- `server/data/ons/ons_intensity_source.csv`
- `server/data/ons/ons_intensity_map.json`
- `scripts/build_ons_intensity.mjs` (new)
- `server/index.ts`
- `server/README.md`
- `src/employer/api.ts` (new)
- `src/employer/normalize.ts` (new)
- `src/employer/types.ts` (new)
- `src/features/page_score/index.ts`
- `src/features/page_score/page_score.css`
- `src/storage/employer_overrides.ts` (new)
- `src/ui/employer_signals.ts` (new)
- `src/content/scan.ts`
- `tests/unit/ons_intensity.test.ts` (new)
- `tests/unit/page_score_ui.test.ts`
- `tests/unit/scan_dom.test.ts`
- `tests/e2e/page_score_jobposting.spec.ts`
- `docs/attribution.md` (new)

## Success criteria
- `/api/employer/signals` includes sector intensity band/value from ONS map.
- UI panel renders employer match + SIC/band states with override storage.
- Job card tooltip shows employer signal status.
- Tests cover mapping fallbacks + UI rendering states.

## Plan (short)
- Build ONS map + mapping utilities.
- Wire server `/signals` with intensity data.
- Add employer panel UI + overrides.
- Add tests + docs attribution.

## Validation (commands)
- `make test`
- `npm run lint`
- `npm run build`

## Validation results
- `make test` (passed)
- `npm run lint` (passed)
- `npm run build` (passed)

## Risks / edge cases
- Branch naming rule (`agent/...`) conflicts with user-specified branch.
- UI copy must avoid implying company-specific footprint.

## Decisions / notes
- User requested CP3.2 and CP3.3 completed before review.
